"use strict";(self.webpackChunk_inversifyjs_inversify_docs_site=self.webpackChunk_inversifyjs_inversify_docs_site||[]).push([["631"],{2729:function(e,i,n){n.r(i),n.d(i,{metadata:()=>r,default:()=>h,frontMatter:()=>a,contentTitle:()=>d,toc:()=>v,assets:()=>o});var r=JSON.parse('{"id":"api/lazy-service-identifier","title":"LazyServiceIdentifier","description":"Overview","source":"@site/docs/api/lazy-service-identifier.mdx","sourceDirName":"api","slug":"/api/lazy-service-identifier","permalink":"/docs/next/api/lazy-service-identifier","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"LazyServiceIdentifier"},"sidebar":"tutorialSidebar","previous":{"title":"decorate","permalink":"/docs/next/api/decorate"},"next":{"title":"ServiceIdentifier","permalink":"/docs/next/api/service-identifier"}}'),t=n(6820),s=n(7588),c=n(9027),l=n(7430);let a={sidebar_position:6,title:"LazyServiceIdentifier"},d="LazyServiceIdentifier",o={},v=[{value:"Overview",id:"overview",level:2},{value:"Problem: Accessing Class Service Identifiers Prematurely",id:"problem-accessing-class-service-identifiers-prematurely",level:2},{value:"Solution: LazyServiceIdentifier",id:"solution-lazyserviceidentifier",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Constructor",id:"constructor",level:3},{value:"Methods",id:"methods",level:3},{value:"unwrap(): ServiceIdentifier&lt;TInstance&gt;",id:"unwrap-serviceidentifiertinstance",level:4},{value:"static is&lt;TInstance&gt;(value: unknown): value is LazyServiceIdentifier&lt;TInstance&gt;",id:"static-istinstancevalue-unknown-value-is-lazyserviceidentifiertinstance",level:4}];function u(e){let i={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"lazyserviceidentifier",children:"LazyServiceIdentifier"})}),"\n",(0,t.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"LazyServiceIdentifier"})," class is a utility that delays the resolution of service identifiers until they're actually needed during dependency injection. Its primary purpose is to prevent accessing class service identifiers before they're fully initialized."]}),"\n",(0,t.jsx)(i.h2,{id:"problem-accessing-class-service-identifiers-prematurely",children:"Problem: Accessing Class Service Identifiers Prematurely"}),"\n",(0,t.jsx)(i.p,{children:"In TypeScript/JavaScript applications, when you directly reference a class as a service identifier before the class is fully defined, you might encounter initialization issues:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-typescript",children:"// ServiceModule.ts\nimport { injectable, inject } from 'inversify';\n\n@injectable()\nexport class Service {\n  // Potential issue - Service class used before fully defined\n  constructor(@inject(AnotherService) private dependency: AnotherService) {}\n}\n\nclass AnotherService {\n  // Implementation\n}\n"})}),"\n",(0,t.jsx)(i.p,{children:"This can lead to several issues:"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"TypeScript errors about using variables before they're declared"}),"\n",(0,t.jsx)(i.li,{children:"Runtime errors as the class might not be fully initialized when used as a service identifier"}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"solution-lazyserviceidentifier",children:"Solution: LazyServiceIdentifier"}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.code,{children:"LazyServiceIdentifier"})," solves this problem by deferring the service identifier resolution until the injection process actually requires it:"]}),"\n",(0,t.jsx)(c.A,{language:"ts",children:l}),"\n",(0,t.jsx)(i.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,t.jsx)(i.h3,{id:"constructor",children:"Constructor"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-typescript",children:"constructor(buildServiceId: () => ServiceIdentifier<TInstance>)\n"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"buildServiceId"}),": A function that returns a ",(0,t.jsx)(i.code,{children:"ServiceIdentifier"}),". This function is called only when the service identifier is actually needed."]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(i.h4,{id:"unwrap-serviceidentifiertinstance",children:"unwrap(): ServiceIdentifier<TInstance>"}),"\n",(0,t.jsx)(i.p,{children:"Returns the resolved service identifier by calling the function provided in the constructor."}),"\n",(0,t.jsx)(i.h4,{id:"static-istinstancevalue-unknown-value-is-lazyserviceidentifiertinstance",children:"static is<TInstance>(value: unknown): value is LazyServiceIdentifier<TInstance>"}),"\n",(0,t.jsxs)(i.p,{children:["Checks if a value is an instance of ",(0,t.jsx)(i.code,{children:"LazyServiceIdentifier"}),"."]})]})}function h(e={}){let{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},7430:function(e){e.exports="import { inject, injectable, LazyServiceIdentifier } from 'inversify';\n\n@injectable()\nexport class Service {\n  // Using LazyServiceIdentifier to safely reference the class itself\n  constructor(\n    @inject(new LazyServiceIdentifier(() => AnotherService))\n    public readonly dependency: unknown,\n  ) {}\n}\n\n@injectable()\nexport class AnotherService {\n  // Implementation\n}\n"}}]);