"use strict";(self.webpackChunk_inversifyjs_inversify_docs_site=self.webpackChunk_inversifyjs_inversify_docs_site||[]).push([["4306"],{3530:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>r,toc:()=>h,default:()=>u,metadata:()=>a,assets:()=>l,contentTitle:()=>c});var a=JSON.parse('{"id":"fundamentals/lifecycle/deactivation","title":"Deactivation","description":"Whenever a singleton scoped service is unbound, the deactivation event is dispatched. A deactivation handler receives a resolved value and returns nothing.","source":"@site/docs/fundamentals/lifecycle/deactivation.mdx","sourceDirName":"fundamentals/lifecycle","slug":"/fundamentals/lifecycle/deactivation","permalink":"/docs/next/fundamentals/lifecycle/deactivation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Deactivation"},"sidebar":"tutorialSidebar","previous":{"title":"Activation","permalink":"/docs/next/fundamentals/lifecycle/activation"},"next":{"title":"Inheritance","permalink":"/docs/next/fundamentals/inheritance"}}'),i=t(4076),o=t(118),d=t(2382),s=t(7193);let r={sidebar_position:2,title:"Deactivation"},c=void 0,l={},h=[];function p(e){let n={a:"a",code:"code",li:"li",p:"p",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Whenever a singleton scoped service is unbound, the deactivation event is dispatched. A deactivation handler receives a resolved value and returns nothing."}),"\n",(0,i.jsx)(s.Z,{language:"ts",children:d}),"\n",(0,i.jsx)(n.p,{children:"It's possible to add a deactivation handler in multiple ways"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Adding the handler to the ",(0,i.jsx)(n.a,{href:"/docs/next/api/container#ondeactivation",children:"container"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Adding the handler to a ",(0,i.jsx)(n.a,{href:"/docs/next/api/binding-syntax#ondeactivation",children:"binding"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Adding the handler to the class through the ",(0,i.jsx)(n.a,{href:"/docs/next/api/decorator#predestroy",children:"preDestroy decorator"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Handlers added to the container are the first ones to be resolved. Any handler added to a child container is called before the ones added to their parent. Relevant bindings from the container are called next and finally the ",(0,i.jsx)(n.code,{children:"preDestroy"}),' method is called. In the example above, relevant bindings are those bindings bound to the unbinded "Destroyable" service identifier.']})]})}function u(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},2382:function(e){e.exports="interface Weapon {\n  damage: number;\n}\n\nclass Katana implements Weapon {\n  readonly #damage: number = 10;\n\n  public get damage(): number {\n    return this.#damage;\n  }\n}\n\nconst container: Container = new Container();\n\ncontainer.bind<Weapon>('Weapon').to(Katana).inSingletonScope();\n\ncontainer.get('Weapon');\n\ncontainer.onDeactivation('Weapon', (weapon: Weapon): void | Promise<void> => {\n  console.log(`Deactivating weapon with damage ${weapon.damage.toString()}`);\n});\n\nawait container.unbind('Weapon');"}}]);