<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-internals/planning" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Planning phase | InversifyJS</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://inversify.github.io/docs/next/internals/planning/ /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="Planning phase | InversifyJS"/><meta data-rh=true name=description content="The planning phase is a critical step that occurs every time you request a service from an InversifyJS container. Before any instances are created or values are resolved, InversifyJS builds a comprehensive plan tree that maps out exactly how to satisfy your dependency request."/><meta data-rh=true property=og:description content="The planning phase is a critical step that occurs every time you request a service from an InversifyJS container. Before any instances are created or values are resolved, InversifyJS builds a comprehensive plan tree that maps out exactly how to satisfy your dependency request."/><link data-rh=true rel=icon href=/img/favicon.ico /><link data-rh=true rel=canonical href=https://inversify.github.io/docs/next/internals/planning/ /><link data-rh=true rel=alternate href=https://inversify.github.io/docs/next/internals/planning/ hreflang=en /><link data-rh=true rel=alternate href=https://inversify.github.io/docs/next/internals/planning/ hreflang=x-default /><link data-rh=true rel=preconnect href=https://FJYVAGM6L7-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://inversify.github.io/docs/next/internals/planning","name":"Planning phase","position":1}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="InversifyJS RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="InversifyJS Atom Feed"><link rel=search type=application/opensearchdescription+xml title=InversifyJS href=/opensearch.xml><link rel=stylesheet href=/assets/css/styles.ffeb34a5.css /><script src=/assets/js/runtime~main.70420c81.js defer></script><script src=/assets/js/main.e0ab327a.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/img/logo.svg /><div role=region aria-label="Skip to main content"><a class=skipToContent_S_w3 href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class="theme-announcement-bar announcementBar_SQQ7" role=banner><div class=announcementBarPlaceholder_tOtm></div><div class="content_MJXC announcementBarContent_UY2K">Your feedback is important to us! Please take a moment to read the <a target=_blank rel="noopener noreferrer" href=/blog/planning-inversify-8-0-0/>v8 announcement</a></div><button type=button aria-label=Close class="clean-btn close closeButton_bKe4 announcementBarClose_Ve30"><svg viewBox="0 0 15 15" width=14 height=14><g stroke=currentColor stroke-width=3.1><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"/></g></svg></button></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt=InversifyJS class="themedComponent_X7G1 themedComponent--light_brSO"/><img src=/img/logo.svg alt=InversifyJS class="themedComponent_X7G1 themedComponent--dark_wIR7"/></div><b class="navbar__title text--truncate">InversifyJS</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/next/introduction/getting-started/>Tutorial</a><a class="navbar__item navbar__link" href=/blog/>Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/docs/next/internals/planning/>Next</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/next/internals/planning/>Next</a><li><a class=dropdown__link href=/docs/internals/planning/>7.x</a><li><a class=dropdown__link href=/docs/6.x/introduction/getting-started/>6.x</a></ul></div><a href=https://github.com/inversify/monorepo target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_ErWF><use href=#theme-svg-external-link /></svg></a><div class="toggle_wzOO colorModeToggle_sxAX"><button class="clean-btn toggleButton_xj4x toggleButtonDisabled_aPix" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_IiJZ lightToggleIcon_EOug"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_IiJZ darkToggleIcon_GjIC"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_IiJZ systemToggleIcon_FmDI"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_GKcz><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_W4AJ"><div class=docsWrapper_nYQx><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_B_BG" type=button></button><div class=docRoot_Y1IL><aside class="theme-doc-sidebar-container docSidebarContainer_fPul"><div class=sidebarViewport_wO5m><div class=sidebar_JEdQ><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Bz8N menuWithAnnouncementBar_khep"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_KO33 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/next/introduction/getting-started/><span title=Introduction class=categoryLinkLabel_xPNx>Introduction</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_KO33 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/next/fundamentals/binding/><span title=Fundamentals class=categoryLinkLabel_xPNx>Fundamentals</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_KO33 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/next/api/binding-syntax/><span title=API class=categoryLinkLabel_xPNx>API</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_KO33 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/next/faq/requirements/><span title=FAQ class=categoryLinkLabel_xPNx>FAQ</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_KO33 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/next/guides/migrating-from-v6/><span title=Guides class=categoryLinkLabel_xPNx>Guides</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_KO33 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/next/ecosystem/binding-decorators/><span title=Ecosystem class=categoryLinkLabel_xPNx>Ecosystem</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_KO33 menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/docs/next/internals/planning/><span title=Internals class=categoryLinkLabel_xPNx>Internals</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/next/internals/planning/><span title="Planning phase" class=linkLabel_wzxL>Planning phase</span></a></ul></ul></nav></div></div></aside><main class=docMainContainer_LjD2><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_Zh9U"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role=alert><div>This is unreleased documentation for <!-- -->InversifyJS<!-- --> <b>Next</b> version.</div><div class=margin-top--md>For up-to-date documentation, see the <b><a href=/docs/internals/planning/>latest version</a></b> (<!-- -->7.x<!-- -->).</div></div><div class=docItemContainer_faG5><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_klZf" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_t_od><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Internals</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Planning phase</span></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_BiYA theme-doc-toc-mobile tocMobile_NfhB"><button type=button class="clean-btn tocCollapsibleButton_IZvc">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Planning Phase</h1></header>
<p>The planning phase is a critical step that occurs every time you request a service from an InversifyJS container. Before any instances are created or values are resolved, InversifyJS builds a comprehensive <strong>plan tree</strong> that maps out exactly how to satisfy your dependency request.</p>
<h2 class="anchor anchorTargetStickyNavbar_idJW" id=what-is-a-plan-tree>What is a Plan Tree?<a href=#what-is-a-plan-tree class=hash-link aria-label="Direct link to What is a Plan Tree?" title="Direct link to What is a Plan Tree?" translate=no>​</a></h2>
<p>A plan tree is a hierarchical data structure that describes the complete resolution strategy for a service. It captures:</p>
<ul>
<li class="">Which <a class="" href=/docs/next/fundamentals/binding/>bindings</a> will be used to resolve each service</li>
<li class="">What dependencies each service requires (constructor parameters and properties)</li>
<li class="">The order in which services must be resolved</li>
<li class="">Metadata about each binding and its resolution requirements</li>
</ul>
<p>Think of it as a blueprint that the container follows during the resolution phase to construct and wire together your dependency graph.</p>
<h2 class="anchor anchorTargetStickyNavbar_idJW" id=how-planning-works>How Planning Works<a href=#how-planning-works class=hash-link aria-label="Direct link to How Planning Works" title="Direct link to How Planning Works" translate=no>​</a></h2>
<p>When you call <code>container.get()</code> or <code>container.getAll()</code>, InversifyJS performs the following steps:</p>
<h3 class="anchor anchorTargetStickyNavbar_idJW" id=1-cache-check>1. Cache Check<a href=#1-cache-check class=hash-link aria-label="Direct link to 1. Cache Check" title="Direct link to 1. Cache Check" translate=no>​</a></h3>
<p>First, the container checks if a plan already exists in its cache for the requested service identifier and constraints (name, tags, etc.). If a matching plan is found, it's reused immediately, avoiding redundant planning work.</p>
<h3 class="anchor anchorTargetStickyNavbar_idJW" id=2-building-the-service-node>2. Building the Service Node<a href=#2-building-the-service-node class=hash-link aria-label="Direct link to 2. Building the Service Node" title="Direct link to 2. Building the Service Node" translate=no>​</a></h3>
<p>If no cached plan exists, InversifyJS builds a <strong>service node</strong> for the requested service:</p>
<ol>
<li class=""><strong>Constraint Building</strong>: The container builds a constraint list from your request parameters (service identifier, name, tags, optional/multiple flags)</li>
<li class=""><strong>Binding Filtering</strong>: All <a class="" href=/docs/next/fundamentals/binding/>bindings</a> for the service identifier are filtered based on these constraints using each binding's <code>isSatisfiedBy()</code> method</li>
<li class=""><strong>Autobinding</strong>: If no bindings are found and autobinding is enabled, a new instance binding is automatically created for the service</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_idJW" id=3-processing-each-binding>3. Processing Each Binding<a href=#3-processing-each-binding class=hash-link aria-label="Direct link to 3. Processing Each Binding" title="Direct link to 3. Processing Each Binding" translate=no>​</a></h3>
<p>For each matching binding, InversifyJS creates a <strong>binding node</strong> based on the binding type:</p>
<ul>
<li class=""><strong>Instance Bindings</strong>: Creates an <code>InstanceBindingNode</code> that includes the class metadata and recursively plans all constructor parameters and property injections</li>
<li class=""><strong>Resolved Value Bindings</strong>: Creates a <code>ResolvedValueBindingNode</code> that recursively plans all parameters required by the factory function</li>
<li class=""><strong>Service Redirection Bindings</strong>: Creates a <code>PlanServiceRedirectionBindingNode</code> that redirects to another service identifier</li>
<li class=""><strong>Leaf Bindings</strong> (Constant, Dynamic Value, Factory, Provider): Creates a <code>LeafBindingNode</code> with no child dependencies</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_idJW" id=4-recursive-dependency-planning>4. Recursive Dependency Planning<a href=#4-recursive-dependency-planning class=hash-link aria-label="Direct link to 4. Recursive Dependency Planning" title="Direct link to 4. Recursive Dependency Planning" translate=no>​</a></h3>
<p>For bindings with dependencies (instance and resolved value bindings), InversifyJS recursively builds plan nodes for each dependency. This creates a tree structure where:</p>
<ul>
<li class="">Each service node represents a service to be resolved</li>
<li class="">Each binding node represents how that service will be resolved</li>
<li class="">Child nodes represent the dependencies required by that resolution strategy</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_idJW" id=5-lazy-evaluation>5. Lazy Evaluation<a href=#5-lazy-evaluation class=hash-link aria-label="Direct link to 5. Lazy Evaluation" title="Direct link to 5. Lazy Evaluation" translate=no>​</a></h3>
<p>To optimize performance, some parts of the plan tree use <strong>lazy evaluation</strong>. Child dependency nodes are wrapped in <code>LazyPlanServiceNode</code> instances that defer their full planning until actually needed during resolution. This avoids planning unused branches in scenarios with optional dependencies or conditional logic.</p>
<h3 class="anchor anchorTargetStickyNavbar_idJW" id=6-validation>6. Validation<a href=#6-validation class=hash-link aria-label="Direct link to 6. Validation" title="Direct link to 6. Validation" translate=no>​</a></h3>
<p>After building the tree, InversifyJS validates it:</p>
<ul>
<li class="">For single injections (<code>container.get()</code>), ensures exactly one binding was found (or zero for optional injections)</li>
<li class="">Detects circular dependencies by tracking the service branch during planning and throwing descriptive errors</li>
<li class="">Validates that all required constraints are satisfied</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_idJW" id=7-caching>7. Caching<a href=#7-caching class=hash-link aria-label="Direct link to 7. Caching" title="Direct link to 7. Caching" translate=no>​</a></h3>
<p>The completed plan tree is stored in the container's plan cache, indexed by the service identifier and constraint options. Subsequent requests for the same service with the same constraints will reuse this cached plan, making repeated resolutions much faster.</p>
<h2 class="anchor anchorTargetStickyNavbar_idJW" id=context-free-vs-context-dependent-plans>Context-Free vs Context-Dependent Plans<a href=#context-free-vs-context-dependent-plans class=hash-link aria-label="Direct link to Context-Free vs Context-Dependent Plans" title="Direct link to Context-Free vs Context-Dependent Plans" translate=no>​</a></h2>
<p>Plan trees track whether they are <strong>context-free</strong> or <strong>context-dependent</strong>:</p>
<ul>
<li class=""><strong>Context-free plans</strong>: Don't depend on ancestor services (no usage of ancestor-based constraints). These can be safely cached and reused across different resolution contexts.</li>
<li class=""><strong>Context-dependent plans</strong>: Use ancestor-based constraints (e.g., filtering by parent service). These are still cached but marked as context-dependent.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_idJW" id=plan-tree-structure>Plan Tree Structure<a href=#plan-tree-structure class=hash-link aria-label="Direct link to Plan Tree Structure" title="Direct link to Plan Tree Structure" translate=no>​</a></h2>
<p>A complete plan result contains:</p>
<div class="language-typescript codeBlockContainer_l2si theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_ydp_><pre tabindex=0 class="prism-code language-typescript codeBlock_NBJA thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_yb9c><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>interface</span><span class="token plain"> </span><span class="token class-name">PlanResult</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  tree</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    root</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> PlanServiceNode</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<p>Each <code>PlanServiceNode</code> includes:</p>
<ul>
<li class=""><code>serviceIdentifier</code>: The service being resolved</li>
<li class=""><code>bindings</code>: One or more binding nodes describing how to resolve it</li>
<li class=""><code>isContextFree</code>: Whether this node depends on resolution context</li>
</ul>
<p>Each binding node contains:</p>
<ul>
<li class=""><code>binding</code>: The actual binding instance</li>
<li class="">Type-specific metadata (class metadata, parameters, property injections, etc.)</li>
<li class="">Child service nodes for dependencies</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_idJW" id=visualizing-plan-trees>Visualizing Plan Trees<a href=#visualizing-plan-trees class=hash-link aria-label="Direct link to Visualizing Plan Trees" title="Direct link to Visualizing Plan Trees" translate=no>​</a></h2>
<p>Use the interactive code editor below to experiment with different binding configurations and see the generated plan trees. The editor allows you to write InversifyJS code and visualizes the resulting plan structure, helping you understand how the container resolves your dependencies.</p>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_idJW" id=performance-considerations>Performance Considerations<a href=#performance-considerations class=hash-link aria-label="Direct link to Performance Considerations" title="Direct link to Performance Considerations" translate=no>​</a></h2>
<p>The planning phase is designed to be efficient:</p>
<ul>
<li class=""><strong>Caching</strong>: Plans are cached and reused for identical requests</li>
<li class=""><strong>Lazy evaluation</strong>: Unnecessary branches aren't fully evaluated</li>
<li class=""><strong>Immutable data structures</strong>: Uses immutable linked lists for efficient constraint list management</li>
<li class=""><strong>Early validation</strong>: Catches configuration errors during planning rather than during resolution</li>
</ul>
<p>Most of the computational cost happens during the first request for a service. Subsequent requests benefit from the cached plan, making them significantly faster.</div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/next/ecosystem/suites/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Suites</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_aHQu thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#what-is-a-plan-tree class="table-of-contents__link toc-highlight">What is a Plan Tree?</a><li><a href=#how-planning-works class="table-of-contents__link toc-highlight">How Planning Works</a><ul><li><a href=#1-cache-check class="table-of-contents__link toc-highlight">1. Cache Check</a><li><a href=#2-building-the-service-node class="table-of-contents__link toc-highlight">2. Building the Service Node</a><li><a href=#3-processing-each-binding class="table-of-contents__link toc-highlight">3. Processing Each Binding</a><li><a href=#4-recursive-dependency-planning class="table-of-contents__link toc-highlight">4. Recursive Dependency Planning</a><li><a href=#5-lazy-evaluation class="table-of-contents__link toc-highlight">5. Lazy Evaluation</a><li><a href=#6-validation class="table-of-contents__link toc-highlight">6. Validation</a><li><a href=#7-caching class="table-of-contents__link toc-highlight">7. Caching</a></ul><li><a href=#context-free-vs-context-dependent-plans class="table-of-contents__link toc-highlight">Context-Free vs Context-Dependent Plans</a><li><a href=#plan-tree-structure class="table-of-contents__link toc-highlight">Plan Tree Structure</a><li><a href=#visualizing-plan-trees class="table-of-contents__link toc-highlight">Visualizing Plan Trees</a><li><a href=#performance-considerations class="table-of-contents__link toc-highlight">Performance Considerations</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs/introduction/getting-started/>Tutorial</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://discord.gg/jXcMagAPnm target=_blank rel="noopener noreferrer" class=footer__link-item>Discord<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_ErWF><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/blog/>Blog</a><li class=footer__item><a href=https://github.com/inversify/monorepo target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_ErWF><use href=#theme-svg-external-link /></svg></a></ul></div></div></div></footer></div></body>